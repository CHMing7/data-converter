plugins {
    id("com.github.johnrengelman.shadow") version "5.2.0"
}

dependencies {
    // 引用除了本模块与根模块之外的所有模块
    rootProject.allprojects.stream().filter({
        it != rootProject && it != project
    }).forEach({
        compile it
    })
}

publishing {
    publications {
        shadow(MavenPublication) { publication ->
            project.shadow.component(publication)
        }
    }

    repositories {
        maven { url = "http://maven.aliyun.com/nexus/content/repositories/jcenter" }
        maven { url = "http://maven.aliyun.com/nexus/content/groups/public/" }
        mavenCentral()
        mavenLocal()
    }
}


shadowJar {
    baseName = "data-converter-all"
    version = rootProject.version
    //classifier是生成jar包的后缀
    classifier = null

    dependencies {
        // 只打包本项目的模块
        include(dependency {
            it.moduleGroup == 'com.chm.converter'
        })
    }
}